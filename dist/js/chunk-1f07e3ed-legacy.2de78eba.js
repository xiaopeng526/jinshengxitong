(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f07e3ed"],{"07ac":function(t,e,r){var n=r("23e7"),s=r("6f53").values;n({target:"Object",stat:!0},{values:function(t){return s(t)}})},"15aa":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"new-role-dialog"},[r("h1",{staticClass:"title"},[t._v(t._s(t.title))]),r("div",{staticClass:"content"},[r("el-form",{ref:"roleForm",staticClass:"roleForm",attrs:{model:t.roleForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:t.constants.FORM_ROLE_NAME,prop:"name"}},[r("el-input",{model:{value:t.roleForm.name,callback:function(e){t.$set(t.roleForm,"name","string"===typeof e?e.trim():e)},expression:"roleForm.name"}})],1),r("el-form-item",{staticClass:"permissions",attrs:{label:t.constants.ACCESS_CHOICE,prop:"permissions"}},t._l(t.permissions,(function(t,e){return r("access-group",{key:e,ref:"access"+e,refInFor:!0,attrs:{items:t.child,label:t.name}})})),1),r("el-form-item",{staticClass:"btn-group"},[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:t.close}},[t._v(" "+t._s(t.constants.BTN_CANCLE)+" ")]),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(e){return t.submitForm("roleForm")}}},[t._v(" "+t._s(t.constants.BTN_CONFIRM)+" ")])],1)],1)],1)])},s=[],i=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("4de4"),r("caad"),r("d81d"),r("13d5"),r("b0c0"),r("a9e3"),r("b64b"),r("d3b7"),r("07ac"),r("2532"),r("3ca3"),r("2ca0"),r("ddb0"),r("38fb")),a=r("fea5"),o={props:{visible:{type:Boolean,default:!0},permissions:{type:Array,default:function(){return[]}},actionType:{type:String,default:"add"},id:{type:[String,Number],default:""}},data:function(){var t=this,e=function(e,r,n){var s=t.getCheckedPermissions().length>0;s?n():n(new Error("至少选择一个权限"))};return{treeRole:[],roleForm:{name:"",permission:[]},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{max:20,message:"不能超过20个字符",trigger:"blur"}],permission:[{validator:e,trigger:"blur"}]},constants:{FORM_ROLE_NAME:i["m"],BTN_CANCLE:i["c"],BTN_CONFIRM:i["d"],ACCESS_CHOICE:i["a"]}}},methods:{close:function(){this.$emit("update:visible",!1)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.submitFunc(e.afterSubmit)}))},getCheckedPermissions:function(){var t=this;return Object.keys(this.$refs).filter((function(t){return t.startsWith("access")})).map((function(e){return t.$refs[e]&&t.$refs[e][0]&&t.$refs[e][0].checkedList})).reduce((function(t,e){return t.concat(e)}),[])},addRole:function(t){var e=this;Object(a["d"])(this.getParams()).then((function(r){return e.$message({message:"添加成功",type:"success"}),t&&t()}))},getParams:function(){return{name:this.roleForm.name,permissions:this.getCheckedPermissions()}},afterSubmit:function(){this.$emit("refresh"),this.close()},getInfo:function(t){var e=this;Object(a["B"])(t).then((function(t){e.roleForm.name=t.name,e.setPermissions(t.permissions)}))},updateRoleInfo:function(t){var e=this;Object(a["eb"])(this.id,this.getParams()).then((function(r){return e.$message({message:"修改成功",type:"success"}),t&&t()}))},setPermissions:function(t){for(var e=Object.values(this.permissions.map((function(t){var e=t.child||[];return e.map((function(t){return t.id}))}))),r=0;r<e.length;r++){var n=[],s=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var u=o.value;e[r].includes(u)&&n.push(u)}}catch(f){i=!0,a=f}finally{try{s||null==c.return||c.return()}finally{if(i)throw a}}this.$refs["access".concat(r)][0].checkedList=n}}},computed:{title:function(){return"add"==this.actionType?i["u"]:i["w"]},submitFunc:function(){return"add"==this.actionType?this.addRole:this.updateRoleInfo}},components:{"access-group":function(){return r.e("chunk-766b811e").then(r.bind(null,"7dd4"))}},created:function(){"modify"==this.actionType&&this.getInfo(this.id)}},c=o,u=(r("ea16"),r("2877")),f=Object(u["a"])(c,n,s,!1,null,"7cee6c88",null);e["default"]=f.exports},"2ca0":function(t,e,r){"use strict";var n=r("23e7"),s=r("06cf").f,i=r("50c4"),a=r("5a34"),o=r("1d80"),c=r("ab13"),u=r("c430"),f="".startsWith,l=Math.min,m=c("startsWith"),d=!u&&!m&&!!function(){var t=s(String.prototype,"startsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!d&&!m},{startsWith:function(t){var e=String(o(this));a(t);var r=i(l(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return f?f.call(e,n,r):e.slice(r,r+n.length)===n}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),s=r("5899"),i="["+s+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),c=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(a,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},"6f53":function(t,e,r){var n=r("83ab"),s=r("df75"),i=r("fc6a"),a=r("d1e7").f,o=function(t){return function(e){var r,o=i(e),c=s(o),u=c.length,f=0,l=[];while(u>f)r=c[f++],n&&!a.call(o,r)||l.push(t?[r,o[r]]:o[r]);return l}};t.exports={entries:o(!0),values:o(!1)}},a9e3:function(t,e,r){"use strict";var n=r("83ab"),s=r("da84"),i=r("94ca"),a=r("6eeb"),o=r("5135"),c=r("c6b6"),u=r("7156"),f=r("c04e"),l=r("d039"),m=r("7c73"),d=r("241c").f,h=r("06cf").f,p=r("9bf2").f,b=r("58a8").trim,v="Number",g=s[v],N=g.prototype,y=c(m(N))==v,I=function(t){var e,r,n,s,i,a,o,c,u=f(t,!1);if("string"==typeof u&&u.length>2)if(u=b(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+u}for(i=u.slice(2),a=i.length,o=0;o<a;o++)if(c=i.charCodeAt(o),c<48||c>s)return NaN;return parseInt(i,n)}return+u};if(i(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var C,_=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof _&&(y?l((function(){N.valueOf.call(r)})):c(r)!=v)?u(new g(I(e)),r,_):I(e)},E=n?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;E.length>F;F++)o(g,C=E[F])&&!o(_,C)&&p(_,C,h(g,C));_.prototype=N,N.constructor=_,a(s,v,_)}},b0c0:function(t,e,r){var n=r("83ab"),s=r("9bf2").f,i=Function.prototype,a=i.toString,o=/^\s*function ([^ (]*)/,c="name";!n||c in i||s(i,c,{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(t){return""}}})},b197:function(t,e,r){},ea16:function(t,e,r){"use strict";var n=r("b197"),s=r.n(n);s.a}}]);