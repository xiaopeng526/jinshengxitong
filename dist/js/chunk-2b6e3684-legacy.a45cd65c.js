(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b6e3684"],{"117b":function(t,e,r){},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"48e4":function(t,e,r){"use strict";var a=r("117b"),n=r.n(a);n.a},"841c":function(t,e,r){"use strict";var a=r("d784"),n=r("825a"),o=r("1d80"),i=r("129f"),l=r("14c3");a("search",1,(function(t,e,r){return[function(e){var r=o(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,r):new RegExp(e)[t](String(r))},function(t){var a=r(e,t,this);if(a.done)return a.value;var o=n(t),s=String(this),c=o.lastIndex;i(c,0)||(o.lastIndex=0);var p=l(o,s);return i(o.lastIndex,c)||(o.lastIndex=c),null===p?-1:p.index}]}))},"86d7":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"approval-org-page"},[r("content-frame",[r("el-row",{staticStyle:{background:"#fff",padding:"14px 24px"}},[r("el-col",{attrs:{span:24,align:"end",justify:"end"}},[r("el-button",{staticStyle:{"border-radius":"20px"},attrs:{type:"primary"},on:{click:t.exportApprovalOrgList}},[t._v("导出当前列表")])],1)],1),r("el-form",{ref:"filterForm",staticStyle:{background:"#fff",padding:"24px"},attrs:{model:t.filterForm,inline:!0}},[r("el-form-item",{attrs:{prop:"workcode",label:"工号："}},[r("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入工号"},model:{value:t.filterForm.workcode,callback:function(e){t.$set(t.filterForm,"workcode",e)},expression:"filterForm.workcode"}})],1),r("el-form-item",{attrs:{prop:"name",label:"姓名："}},[r("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入姓名"},model:{value:t.filterForm.name,callback:function(e){t.$set(t.filterForm,"name",e)},expression:"filterForm.name"}})],1),r("el-form-item",{attrs:{prop:"department",label:"部门："}},[r("el-cascader",{staticStyle:{"margin-left":"10px",width:"170px"},attrs:{placeholder:"请选择部门",props:t.filterProps,options:t.dpArr,"show-all-levels":!1},model:{value:t.filterForm.dp,callback:function(e){t.$set(t.filterForm,"dp",e)},expression:"filterForm.dp"}})],1),r("el-form-item",{attrs:{prop:"department",label:"晋升结果："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"全部"},model:{value:t.filterForm.status,callback:function(e){t.$set(t.filterForm,"status",e)},expression:"filterForm.status"}},t._l(t.approval_status_arr,(function(t,e){return r("el-option",{key:t,attrs:{label:t,value:e}})})),1)],1),r("el-form-item",[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(e){return t.submitForm("filterForm")}}},[t._v("查询")]),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(e){return t.resetForm("filterForm")}}},[t._v("重置")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"45"}}),r("el-table-column",{attrs:{prop:"workcode",label:"工号"}}),r("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{staticClass:"text",on:{click:function(r){return t.promotionName(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),r("el-table-column",{attrs:{prop:"department_name",label:"部门",width:"130"}}),r("el-table-column",{attrs:{prop:"level",label:"晋升前职级"}}),r("el-table-column",{attrs:{prop:"target_level",label:"目标职级"}}),r("el-table-column",{attrs:{prop:"status_text",label:"晋升结果"}}),r("el-table-column",{attrs:{prop:"apply_time",label:"申报时间",width:"180"}}),r("el-table-column",{attrs:{prop:"promotion_type_text",label:"晋升类型"}}),r("el-table-column",{attrs:{prop:"promotion_name",label:"晋升名称"}}),r("el-table-column",{attrs:{prop:"applicant_name",label:"提报人"}})],1),r("br"),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":t.constants.PAGINATION_SIZE_ENUM,"page-size":t.pageSize,layout:"sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)],1)},n=[],o=(r("a4d3"),r("4de4"),r("4160"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("ac1f"),r("841c"),r("159b"),r("ade3")),i=r("38fb"),l=r("fea5"),s=r("c9f1");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u={data:function(){return{showDialog:!1,actionType:"add",selectedUser:"",pageSize:20,currentPage:1,total:0,filterProps:{value:"id",label:"name",children:"children"},filterForm:{workcode:"",name:"",dp:[],status:""},tableData:[],dpArr:[],approval_status_arr:[],constants:{PAGINATION_SIZE_ENUM:i["t"]},tabelSelection:[]}},methods:{handleSelectionChange:function(t){this.tabelSelection=t},promotionName:function(t){var e=t.promotion_id,r=t.id;this.$router.push(Object(s["n"])("approvalOrg",e,r))},exportApprovalOrgList:function(){var t={token:this.getToken(),workcode:this.filterForm.workcode,name:this.filterForm.name,department_id:this.filterForm.dp[this.filterForm.dp.length-1]?this.filterForm.dp[this.filterForm.dp.length-1]:"",status:this.filterForm.status};0==this.tableData.length?this.$message.warning("导出当前的数据为空"):this.downloadFile(s["b"],t,"get")},handleCurrentChange:function(t){this.search(p({},this.getBaseParams(),{page:t}))},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.search(p({},this.getBaseParams(),{per_page:t,page:1}))},getStatus:function(){var t=this;Object(l["E"])().then((function(e){t.approval_status_arr=e}))},getDepartments:function(){var t=this,e={display_parent_node:!0};Object(l["H"])(e).then((function(e){t.dpArr=e}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.currentPage=1,e.$nextTick((function(){this.search(p({},this.getBaseParams(),{page:1}))}))}))},resetForm:function(t){this.$refs[t].resetFields(),this.$nextTick((function(){this.filterForm={workcode:"",name:"",dp:[],status:""},this.refresh()}))},search:function(t){var e=this;Object(l["s"])(t).then((function(t){var r=t.data,a=t.total;e.tableData=r,e.total=a}))},refresh:function(){this.search(this.getBaseParams())},getBaseParams:function(){return{page:this.currentPage,per_page:this.pageSize,workcode:this.filterForm.workcode,department_id:this.filterForm.dp[this.filterForm.dp.length-1]?this.filterForm.dp[this.filterForm.dp.length-1]:"",status:this.filterForm.status,name:this.filterForm.name}},modifyUser:function(t){this.selectedUser=t,this.actionType="modify",this.showDialog=!0}},components:{"content-frame":function(){return r.e("chunk-76173720").then(r.bind(null,"fc5c"))}},created:function(){this.getStatus(),this.getDepartments(),this.search(p({},this.getBaseParams(),{page:1}))}},f=u,m=(r("48e4"),r("2877")),d=Object(m["a"])(f,a,n,!1,null,"22385ef5",null);e["default"]=d.exports},b0c0:function(t,e,r){var a=r("83ab"),n=r("9bf2").f,o=Function.prototype,i=o.toString,l=/^\s*function ([^ (]*)/,s="name";!a||s in o||n(o,s,{configurable:!0,get:function(){try{return i.call(this).match(l)[1]}catch(t){return""}}})}}]);