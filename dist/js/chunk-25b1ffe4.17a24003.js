(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25b1ffe4"],{"9cdc":function(e,t,a){"use strict";var n=a("ade3"),s=a("38fb");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t["a"]={data(){return{pageSize:20,currentPage:1,total:0,tableData:[],constants:{PAGINATION_SIZE_ENUM:s["t"]}}},methods:{handleCurrentChange(e){this.getTableList(i({},this.getBaseParams(),{page:e}))},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.getTableList(i({},this.getBaseParams(),{per_page:e,page:1}))},getTableList(e){this.startLoading(),this.tableListAPI(e).then(e=>{var{data:t,total:a}=e;this.tableData=t,this.total=a,this.stopLoading()})}}}},e80a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"access-role-page"},[a("action-frame",[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("div",[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{plain:""},on:{click:e.addRole}},[e._v("新增角色")])],1)])],1),a("div",{staticClass:"section-content"},[a("content-frame",[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData}},[e._l(e.tableColumns,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label}})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.modify(t.row.id)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.row.id)}}},[e._v("删除")])]}}])})],2),a("br"),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.constants.PAGINATION_SIZE_ENUM,"page-size":20,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1),a("el-drawer",{attrs:{size:"600px",direction:"ltr",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[e.showDialog?a("role-dialog",{attrs:{visible:e.showDialog,id:e.selectedRole,actionType:e.actionType,permissions:e.permissions},on:{"update:visible":function(t){e.showDialog=t},refresh:e.refresh}}):e._e()],1)],1)},s=[],r=(a("cca6"),a("e6cf"),a("38fb")),i=a("fea5"),o=a("9cdc"),l={mixins:[o["a"]],data(){return{showDialog:!1,actionType:"add",selectedRole:"",filterForm:{name:"",department:""},constants:{PAGINATION_SIZE_ENUM:r["t"]},permissions:[],tableColumns:Object.assign([{prop:"name",label:"角色"},{prop:"permission_str",label:"权限"}]),tableListAPI:i["C"]}},methods:{deleteRow(e){this.showConfirm("确定要删除这个角色?").then(()=>{Object(i["f"])(e).then(e=>{this.$message({message:"删除成功!",type:"success"}),this.refresh()})}).catch(()=>{})},modify(e){this.selectedRole=e,this.actionType="modify",this.showDialog=!0},addRole(){this.actionType="add",this.showDialog=!0},getPermissionItems(){Object(i["q"])().then(e=>{this.permissions=e})},getParams(){return{page:this.currentPage,per_page:this.pageSize}},refresh(){this.getTableList(this.getParams())}},components:{"action-frame":()=>a.e("chunk-076129e3").then(a.bind(null,"cb5f")),"content-frame":()=>a.e("chunk-76173720").then(a.bind(null,"fc5c")),"role-dialog":()=>a.e("chunk-430fa8e6").then(a.bind(null,"15aa"))},created(){this.getPermissionItems(),this.refresh()}},c=l,p=a("2877"),u=Object(p["a"])(c,n,s,!1,null,null,null);t["default"]=u.exports}}]);