(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39cd8f1a"],{be1a:function(e,t,n){},d02e:function(e,t,n){"use strict";var o=n("be1a"),i=n.n(o);i.a},dc26:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail-info-component"},[n("content-frame",[n("div",{staticClass:"top_container"},[n("el-row",{attrs:{type:"flex",align:"middle"}},[n("el-col",{attrs:{span:18,justify:"center",align:"middle"}},[n("span",[e._v(e._s(e.promotion_name))])]),n("el-col",{attrs:{span:6,align:"right"}},[n("el-button",{staticClass:"button text",attrs:{type:"button",size:"mini"},on:{click:e.submitDraft}},[e._v("保存")]),n("el-button",{staticClass:"button text",attrs:{type:"button",size:"mini"},on:{click:e.submitReport}},[e._v("提交")])],1)],1)],1),n("BasicInfo",{attrs:{basic_info:e.basic_info,employment_info:e.employment_info}}),n("applyInfo",{attrs:{basic_info:e.basic_info,employment_info:e.employment_info,basic_info_back:e.basic_info_back}}),n("EduInfo",{attrs:{education_experience:e.education_experience}}),n("TALResume",{attrs:{tal_experience:e.tal_experience}}),n("OtherResume",{attrs:{other_company_experience:e.other_company_experience}}),n("RefInfo",{attrs:{talent:e.talent,Ref_content:e.Ref_content},on:{talentDelete:e.talentDelete,talentadd:e.talentadd}}),n("WorkSummary",{attrs:{job_summary:e.job_summary}}),e.show_weekly?n("Weekly",{ref:"Weekly",attrs:{week_report:e.week_report}}):e._e()],1)],1)},i=[],a=(n("e6cf"),n("2532"),n("fea5")),s=n("c9f1"),r={data(){return{promotion_name:"",workcode:"",basic_info:{},employment_info:{},basic_info_back:{boy:"",girl:"",target_level:"",is_skip_level:"",development_plan:"",team_people_count:""},education_experience:[],tal_experience:[],other_company_experience:[],talent:[{name:"",index:0,workcode:"",department_name:"",position:"",level:"",type:[]}],Ref_content:{talent_other:"",crisis:"",achievement:["","",""]},job_summary:{leadership_description:"",achievement_description:""},week_report:{study:[{date:"",content:""},{date:"",content:""},{date:"",content:""}],customer:[{date:"",content:""},{date:"",content:""},{date:"",content:""}]},show_weekly:!1}},components:{"content-frame":()=>n.e("chunk-76173720").then(n.bind(null,"fc5c")),BasicInfo:()=>n.e("chunk-415a2460").then(n.bind(null,"e614")),applyInfo:()=>n.e("chunk-031f2382").then(n.bind(null,"1ff7")),EduInfo:()=>n.e("chunk-fa816cf2").then(n.bind(null,"01d5")),TALResume:()=>n.e("chunk-752a719a").then(n.bind(null,"9251")),OtherResume:()=>n.e("chunk-902822fc").then(n.bind(null,"02c5")),RefInfo:()=>n.e("chunk-1f2c8121").then(n.bind(null,"99bd")),WorkSummary:()=>n.e("chunk-0d4b84ac").then(n.bind(null,"5634")),Weekly:()=>n.e("chunk-276f33f0").then(n.bind(null,"bfd6"))},methods:{getPromotionsInfo(){Object(a["w"])(this.workcode).then(e=>{this.basic_info=e.basic_info,this.employment_info=e.employment_info,this.education_experience=e.education_experience,this.tal_experience=e.tal_experience,this.other_company_experience=e.other_company_experience,this.basic_info_back.team_people_count=e.basic_info.team_people_count}).then(()=>{this.getPromotionDraft()})},getPromotionDraft(){var e=this.$route.params.promotion_id,t=this.$route.params.promotion_user_id;Object(a["o"])(e,t).then(e=>{e&&(this.basic_info_back={boy:e.content.children.boy,girl:e.content.children.girl,target_level:this.basic_info_back.target_level,development_plan:e.content.development_plan,team_people_count:e.content.team_people_count},this.Ref_content={talent_other:e.content.important_information.talent_other,crisis:e.content.important_information.crisis,achievement:e.content.important_information.achievement},this.talent=e.content.important_information.talent,this.job_summary=e.content.job_summary,this.week_report=e.content.week_report),this.show_weekly=!0})},getPromotionWebDetail(){var e=this.$route.params.promotion_id,t=this.$route.params.promotion_user_id;Object(a["v"])(e,t).then(e=>{this.workcode=e.promotion_user.workcode,this.basic_info_back.target_level=e.promotion_user.target_level,this.basic_info_back.is_skip_level=e.promotion_user.is_skip_level,this.promotion_name=e.promotion_user.promotion.name,this.getPromotionsInfo()})},talentDelete(e){var t=[];t=this.talent.reduce((t,n)=>(e.includes(n.index)||t.push(n),t),[]),this.talent=[],t.find((e,t)=>{e.index=t}),this.talent=t},talentadd(){var e={name:"",index:this.talent.length,workcode:"",department_name:"",position:"",level:"",type:[]};this.talent.push(e)},submitDraft(){var e=this.$route.params.promotion_id,t=this.$route.params.promotion_user_id;Object(a["T"])(e,t,this.get_submit_data()).then(()=>{this.$message({message:"保存草稿成功",type:"success"})})},submitReport(){this.showConfirm("正式提交后将进入审批并无法修改，请认真核对信息。").then(()=>{this.submitData()}).catch(()=>{})},submitData(){var e=this.$route.params.promotion_id,t=this.$route.params.promotion_user_id;Object(a["U"])(e,t,this.get_submit_data()).then(()=>{this.$message({message:"提交成功",type:"success"}),this.$router.push(Object(s["n"])("self",e,t))})},get_submit_data(){var e=this.$refs.Weekly.callback_input(),t={customer:[{date:this.week_report.customer[0].date,content:e.customer0},{date:this.week_report.customer[1].date,content:e.customer1},{date:this.week_report.customer[2].date,content:e.customer2}],study:[{date:this.week_report.study[0].date,content:e.learning0},{date:this.week_report.study[1].date,content:e.learning1},{date:this.week_report.study[2].date,content:e.learning2}]};return{children:{boy:this.basic_info_back.boy,girl:this.basic_info_back.girl},development_plan:this.basic_info_back.development_plan,team_people_count:this.basic_info_back.team_people_count,job_summary:this.job_summary,important_information:{crisis:this.Ref_content.crisis,talent:this.talent,talent_other:this.Ref_content.talent_other,achievement:this.Ref_content.achievement},week_report:t}}},created(){this.getPromotionWebDetail()}},c=r,_=(n("d02e"),n("2877")),l=Object(_["a"])(c,o,i,!1,null,"132a8d2e",null);t["default"]=l.exports}}]);