(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69edd93a"],{"7db0":function(t,e,n){"use strict";var o=n("23e7"),i=n("b727").find,a=n("44d2"),r=n("ae40"),c="find",s=!0,_=r(c);c in[]&&Array(1)[c]((function(){s=!1})),o({target:"Array",proto:!0,forced:s||!_},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(c)},b0c0:function(t,e,n){var o=n("83ab"),i=n("9bf2").f,a=Function.prototype,r=a.toString,c=/^\s*function ([^ (]*)/,s="name";!o||s in a||i(a,s,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},be1a:function(t,e,n){},d02e:function(t,e,n){"use strict";var o=n("be1a"),i=n.n(o);i.a},dc26:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail-info-component"},[n("content-frame",[n("div",{staticClass:"top_container"},[n("el-row",{attrs:{type:"flex",align:"middle"}},[n("el-col",{attrs:{span:18,justify:"center",align:"middle"}},[n("span",[t._v(t._s(t.promotion_name))])]),n("el-col",{attrs:{span:6,align:"right"}},[n("el-button",{staticClass:"button text",attrs:{type:"button",size:"mini"},on:{click:t.submitDraft}},[t._v("保存")]),n("el-button",{staticClass:"button text",attrs:{type:"button",size:"mini"},on:{click:t.submitReport}},[t._v("提交")])],1)],1)],1),n("BasicInfo",{attrs:{basic_info:t.basic_info,employment_info:t.employment_info}}),n("applyInfo",{attrs:{basic_info:t.basic_info,employment_info:t.employment_info,basic_info_back:t.basic_info_back}}),n("EduInfo",{attrs:{education_experience:t.education_experience}}),n("TALResume",{attrs:{tal_experience:t.tal_experience}}),n("OtherResume",{attrs:{other_company_experience:t.other_company_experience}}),n("RefInfo",{attrs:{talent:t.talent,Ref_content:t.Ref_content},on:{talentDelete:t.talentDelete,talentadd:t.talentadd}}),n("WorkSummary",{attrs:{job_summary:t.job_summary}}),t.show_weekly?n("Weekly",{ref:"Weekly",attrs:{week_report:t.week_report}}):t._e()],1)],1)},i=[],a=(n("7db0"),n("caad"),n("13d5"),n("b0c0"),n("d3b7"),n("2532"),n("fea5")),r=n("c9f1"),c={data:function(){return{promotion_name:"",workcode:"",basic_info:{},employment_info:{},basic_info_back:{boy:"",girl:"",target_level:"",is_skip_level:"",development_plan:"",team_people_count:""},education_experience:[],tal_experience:[],other_company_experience:[],talent:[{name:"",index:0,workcode:"",department_name:"",position:"",level:"",type:[]}],Ref_content:{talent_other:"",crisis:"",achievement:["","",""]},job_summary:{leadership_description:"",achievement_description:""},week_report:{study:[{date:"",content:""},{date:"",content:""},{date:"",content:""}],customer:[{date:"",content:""},{date:"",content:""},{date:"",content:""}]},show_weekly:!1}},components:{"content-frame":function(){return n.e("chunk-76173720").then(n.bind(null,"fc5c"))},BasicInfo:function(){return n.e("chunk-415a2460").then(n.bind(null,"e614"))},applyInfo:function(){return n.e("chunk-031f2382").then(n.bind(null,"1ff7"))},EduInfo:function(){return n.e("chunk-fa816cf2").then(n.bind(null,"01d5"))},TALResume:function(){return n.e("chunk-752a719a").then(n.bind(null,"9251"))},OtherResume:function(){return n.e("chunk-902822fc").then(n.bind(null,"02c5"))},RefInfo:function(){return n.e("chunk-1f2c8121").then(n.bind(null,"99bd"))},WorkSummary:function(){return n.e("chunk-0d4b84ac").then(n.bind(null,"5634"))},Weekly:function(){return n.e("chunk-70721638").then(n.bind(null,"bfd6"))}},methods:{getPromotionsInfo:function(){var t=this;Object(a["w"])(this.workcode).then((function(e){t.basic_info=e.basic_info,t.employment_info=e.employment_info,t.education_experience=e.education_experience,t.tal_experience=e.tal_experience,t.other_company_experience=e.other_company_experience,t.basic_info_back.team_people_count=e.basic_info.team_people_count})).then((function(){t.getPromotionDraft()}))},getPromotionDraft:function(){var t=this,e=this.$route.params.promotion_id,n=this.$route.params.promotion_user_id;Object(a["o"])(e,n).then((function(e){e&&(t.basic_info_back={boy:e.content.children.boy,girl:e.content.children.girl,target_level:t.basic_info_back.target_level,development_plan:e.content.development_plan,team_people_count:e.content.team_people_count},t.Ref_content={talent_other:e.content.important_information.talent_other,crisis:e.content.important_information.crisis,achievement:e.content.important_information.achievement},t.talent=e.content.important_information.talent,t.job_summary=e.content.job_summary,t.week_report=e.content.week_report),t.show_weekly=!0}))},getPromotionWebDetail:function(){var t=this,e=this.$route.params.promotion_id,n=this.$route.params.promotion_user_id;Object(a["v"])(e,n).then((function(e){t.workcode=e.promotion_user.workcode,t.basic_info_back.target_level=e.promotion_user.target_level,t.basic_info_back.is_skip_level=e.promotion_user.is_skip_level,t.promotion_name=e.promotion_user.promotion.name,t.getPromotionsInfo()}))},talentDelete:function(t){var e=[];e=this.talent.reduce((function(e,n){return t.includes(n.index)||e.push(n),e}),[]),this.talent=[],e.find((function(t,e){t.index=e})),this.talent=e},talentadd:function(){var t={name:"",index:this.talent.length,workcode:"",department_name:"",position:"",level:"",type:[]};this.talent.push(t)},submitDraft:function(){var t=this,e=this.$route.params.promotion_id,n=this.$route.params.promotion_user_id;Object(a["T"])(e,n,this.get_submit_data()).then((function(){t.$message({message:"保存草稿成功",type:"success"})}))},submitReport:function(){var t=this;this.showConfirm("正式提交后将进入审批并无法修改，请认真核对信息。").then((function(){t.submitData()})).catch((function(){}))},submitData:function(){var t=this,e=this.$route.params.promotion_id,n=this.$route.params.promotion_user_id;Object(a["U"])(e,n,this.get_submit_data()).then((function(){t.$message({message:"提交成功",type:"success"}),t.$router.push(Object(r["n"])("self",e,n))}))},get_submit_data:function(){var t=this.$refs.Weekly.callback_input(),e={customer:[{date:this.week_report.customer[0].date,content:t.customer0},{date:this.week_report.customer[1].date,content:t.customer1},{date:this.week_report.customer[2].date,content:t.customer2}],study:[{date:this.week_report.study[0].date,content:t.learning0},{date:this.week_report.study[1].date,content:t.learning1},{date:this.week_report.study[2].date,content:t.learning2}]};return{children:{boy:this.basic_info_back.boy,girl:this.basic_info_back.girl},development_plan:this.basic_info_back.development_plan,team_people_count:this.basic_info_back.team_people_count,job_summary:this.job_summary,important_information:{crisis:this.Ref_content.crisis,talent:this.talent,talent_other:this.Ref_content.talent_other,achievement:this.Ref_content.achievement},week_report:e}}},created:function(){this.getPromotionWebDetail()}},s=c,_=(n("d02e"),n("2877")),u=Object(_["a"])(s,o,i,!1,null,"132a8d2e",null);e["default"]=u.exports}}]);