(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a986"],{bbd4:function(o,t,e){"use strict";e.r(t);var i=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("el-dialog",{attrs:{title:"hr"==this.approvalType?"评审意见":"org"==this.approvalType?"晋级审批":"评审意见",visible:o.ApprovalDialog,"close-on-click-modal":!1,width:"700px",center:""},on:{close:o.close}},[e("el-form",{ref:"form",attrs:{model:o.form,rules:o.rules}},[e("el-form-item",[e("el-radio",{attrs:{label:"1"},on:{change:function(t){return o.changeState(1)}},model:{value:o.form.state,callback:function(t){o.$set(o.form,"state",t)},expression:"form.state"}},[o._v("通过 ")]),e("el-radio",{attrs:{label:"2"},on:{change:function(t){return o.changeState(2)}},model:{value:o.form.state,callback:function(t){o.$set(o.form,"state",t)},expression:"form.state"}},[o._v("不通过 ")])],1),"org"==this.approvalType?e("el-form-item",{attrs:{prop:"plan"}},[e("el-col",{attrs:{span:5}},[o._v(" 岗位未来规划 ")]),e("el-col",{attrs:{span:19}},[e("el-input",{attrs:{type:"text",placeholder:"请输入岗位未来规划",maxlength:"30","show-word-limit":""},model:{value:o.form.plan,callback:function(t){o.$set(o.form,"plan",t)},expression:"form.plan"}})],1)],1):o._e(),"org"==this.approvalType?e("el-form-item",{attrs:{prop:"post"}},[e("el-col",{attrs:{span:5}},[o._v(" 横向发展岗位 ")]),e("el-col",{attrs:{span:19}},[e("el-input",{attrs:{type:"text",placeholder:"请输入横向发展岗位",maxlength:"30","show-word-limit":""},model:{value:o.form.post,callback:function(t){o.$set(o.form,"post",t)},expression:"form.post"}})],1)],1):o._e(),"org"==this.approvalType?e("el-form-item",{attrs:{prop:"is_promotion_post"}},[e("el-col",{attrs:{span:18}},[o._v(" 从未来规划及横向发展考虑，此岗位是否可以设立拟晋职级 ")]),e("el-col",{attrs:{span:6}},[e("el-radio",{attrs:{label:"1"},model:{value:o.form.is_promotion_post,callback:function(t){o.$set(o.form,"is_promotion_post",t)},expression:"form.is_promotion_post"}},[o._v("是")]),e("el-radio",{attrs:{label:"2"},model:{value:o.form.is_promotion_post,callback:function(t){o.$set(o.form,"is_promotion_post",t)},expression:"form.is_promotion_post"}},[o._v("否")])],1)],1):o._e(),"org"==this.approvalType?e("el-form-item",{attrs:{prop:"is_special"}},[e("el-col",{attrs:{span:5}},[o._v(" 是否破格提报 ")]),e("el-col",{attrs:{span:19}},[e("el-radio",{attrs:{label:"1"},on:{change:function(t){return o.changeForm(1)}},model:{value:o.form.is_special,callback:function(t){o.$set(o.form,"is_special",t)},expression:"form.is_special"}},[o._v("是 ")]),e("el-radio",{attrs:{label:"2"},on:{change:function(t){return o.changeForm(2)}},model:{value:o.form.is_special,callback:function(t){o.$set(o.form,"is_special",t)},expression:"form.is_special"}},[o._v("否 ")])],1)],1):o._e(),"org"==this.approvalType?e("el-form-item",{attrs:{prop:"qualification"}},[e("el-col",{attrs:{span:5}},[o._v(" 晋级资格情况 ")]),e("el-col",{attrs:{span:19}},[e("el-checkbox-group",{attrs:{disabled:o.conCation},model:{value:o.form.qualification,callback:function(t){o.$set(o.form,"qualification",t)},expression:"form.qualification"}},o._l(o.qualification_arr,(function(t){return e("el-checkbox",{key:t.id,attrs:{label:t.id}},[o._v(o._s(t.value)+" ")])})),1)],1)],1):o._e(),"org"==this.approvalType?e("el-form-item",{attrs:{prop:"condition"}},[e("el-col",{attrs:{span:5}},[o._v(" 破格提报情形 ")]),e("el-col",{attrs:{span:19}},[e("el-checkbox-group",{attrs:{disabled:o.conCation},model:{value:o.form.condition,callback:function(t){o.$set(o.form,"condition",t)},expression:"form.condition"}},o._l(o.condition_arr,(function(t){return e("el-checkbox",{key:t.id,attrs:{label:t.id}},[o._v(o._s(t.value)+" ")])})),1)],1)],1):o._e(),"org"==this.approvalType||"hr"==this.approvalType?e("el-form-item",{attrs:{prop:"flow_talent"}},[e("el-col",{attrs:{span:5}},[o._v(" 人才流动 ")]),e("el-col",{attrs:{span:19}},[e("el-checkbox-group",{model:{value:o.form.flow_talent,callback:function(t){o.$set(o.form,"flow_talent",t)},expression:"form.flow_talent"}},o._l(o.flow_talent_arr,(function(t){return e("el-checkbox",{key:t.id,attrs:{label:t.id}},[o._v(o._s(t.value)+" ")])})),1)],1)],1):o._e(),"bu"!=this.approvalType||o.checked?e("p",[o._v(" "+o._s("hr"==o.approvalType?"评审意见":"评审意见及评语")+" ")]):o._e(),"bu"!=this.approvalType||o.checked?e("el-form-item",{attrs:{prop:"opinion"}},[e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入审批意见及评语",maxlength:"200","show-word-limit":""},model:{value:o.form.opinion,callback:function(t){o.$set(o.form,"opinion",t)},expression:"form.opinion"}})],1):o._e()],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:o.close}},[o._v("取消")]),e("el-button",{attrs:{loading:o.isLoading,type:"primary"},on:{click:o.submitRejectReason}},[o._v("确定 ")])],1)],1)],1)},a=[],r=e("fea5"),n={props:{ApprovalDialog:{type:Boolean,default:!1},Id:{type:null,default:""},approvalType:{type:String,default:""},approval:{type:String,default:""}},data:function(){return{conCation:!1,checked:!1,form:{state:"",plan:"",post:"",is_promotion_post:"",is_special:"",qualification:[],condition:[],flow_talent:[],opinion:""},rules:{plan:[{required:!0,message:"请输入岗位未来规划",blur:"blur"}],post:[{required:!0,message:"请输入横向发展岗位",blur:"blur"}],opinion:[{required:!0,message:"请输入审批意见及评语",blur:"blur"}],is_promotion_post:[{required:!0,message:"请选择是或否",trigger:"change"}],is_special:[{required:!0,message:"请选择是或否",trigger:"change"}]},qualification_arr:[{id:1,value:"岗位上限不符合"},{id:2,value:"历练时间不符合"},{id:3,value:"业绩不符合"},{id:4,value:"文化不符合"},{id:5,value:"支教经历不符合"}],condition_arr:[{id:1,value:"愿吃亏：如主动去钱库业务"},{id:2,value:"愿担当：如主动承担挑战性怒飙"},{id:3,value:"潜力大：近两年业绩指标达成情况卓越，未来发展潜力巨大"},{id:4,value:"其他"}],flow_talent_arr:[{id:1,value:"人才流动-1.5"},{id:2,value:"事业部内部跨地区-1分"},{id:3,value:"活水计划-1分"},{id:4,value:"事业部内部且本地区-0.5分"}],isLoading:!1}},created:function(){this.form.approval=this.approval,this.form.opinion=""},methods:{changeState:function(o){"bu"==this.approvalType&&2==o?this.checked=!0:(this.checked=!1,this.form.opinion="")},changeForm:function(o){1==o?this.conCation=!1:(this.form.qualification=[],this.form.condition=[],this.conCation=!0)},close:function(){this.$emit("close")},submitRejectReason:function(){var o=this;if(this.form.state){if(1==this.form.is_special){if(!this.form.qualification.length)return void this.$message.error("请至少选择一种晋级资格情况");if(!this.form.condition.length)return void this.$message.error("请至少选择一种破格提报情形")}this.$refs.form.validate((function(t){if(t){var e={state:o.form.state,plan:o.form.plan,post:o.form.post,is_promotion_post:o.form.is_promotion_post,is_special:o.form.is_special,qualification:o.form.qualification,condition:o.form.condition,flow_talent:o.form.flow_talent,opinion:o.form.opinion};"org"==o.approvalType&&(1==o.form.state?o.postPromotionOrgApproval(o.Id,e):o.showConfirm("建议驳回前先与该员工进行沟通，结果与意见员工本人可见，确认后即可提交").then((function(){o.postPromotionOrgApproval(o.Id,e)})));var i={state:o.form.state,flow_talent:o.form.flow_talent,opinion:o.form.opinion};"hr"==o.approvalType&&(1==o.form.state?o.postPromotionHrApproval(o.Id,i):o.showConfirm("建议驳回前先与该员工进行沟通，结果与意见员工本人可见，确认后即可提交").then((function(){o.postPromotionHrApproval(o.Id,i)})));var a={approval:o.form.state,opinion:o.form.opinion};"super"==o.approvalType&&(1==o.form.state?o.postPromotionTeamApproval(o.Id,a):o.showConfirm("建议驳回前先与该员工进行沟通，结果与意见员工本人可见，确认后即可提交").then((function(){o.postPromotionTeamApproval(o.Id,a)})));var r={state:o.form.state,opinion:o.form.opinion};"bu"==o.approvalType&&(1==o.form.state?o.postPromotionBuApproval(o.Id,r):o.showConfirm("建议驳回前先与该员工进行沟通，结果与意见员工本人可见，确认后即可提交").then((function(){o.postPromotionBuApproval(o.Id,r)})))}}))}else this.$message.error("请选择是否通过")},postPromotionOrgApproval:function(o,t){var e=this;Object(r["S"])(o,t).then((function(o){e.isLoading=!1,e.$message.success("提交成功"),e.$emit("refresh"),e.$emit("close")})).catch((function(o){e.isLoading=!1}))},postPromotionHrApproval:function(o,t){var e=this;Object(r["R"])(o,t).then((function(o){e.isLoading=!1,e.$message.success("提交成功"),e.$emit("refresh"),e.$emit("close")})).catch((function(o){e.isLoading=!1}))},postPromotionTeamApproval:function(o,t){var e=this;Object(r["V"])(o,t).then((function(o){e.isLoading=!1,e.$message.success("提交成功"),e.$emit("refresh"),e.$emit("close")})).catch((function(o){e.isLoading=!1}))},postPromotionBuApproval:function(o,t){var e=this;Object(r["P"])(o,t).then((function(o){e.isLoading=!1,e.$message.success("提交成功"),e.$emit("refresh"),e.$emit("close")})).catch((function(o){e.isLoading=!1}))}}},s=n,l=e("2877"),p=Object(l["a"])(s,i,a,!1,null,"4d8a322f",null);t["default"]=p.exports}}]);