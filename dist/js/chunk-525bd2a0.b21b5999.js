(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-525bd2a0"],{"117b":function(e,t,r){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"48e4":function(e,t,r){"use strict";var a=r("117b"),l=r.n(a);l.a},"841c":function(e,t,r){"use strict";var a=r("d784"),l=r("825a"),n=r("1d80"),s=r("129f"),o=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=n(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var n=l(e),i=String(this),c=n.lastIndex;s(c,0)||(n.lastIndex=0);var p=o(n,i);return s(n.lastIndex,c)||(n.lastIndex=c),null===p?-1:p.index}]}))},"86d7":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"approval-org-page"},[r("content-frame",[r("el-row",{staticStyle:{background:"#fff",padding:"14px 24px"}},[r("el-col",{attrs:{span:24,align:"end",justify:"end"}},[r("el-button",{staticStyle:{"border-radius":"20px"},attrs:{type:"primary"},on:{click:e.exportApprovalOrgList}},[e._v("导出当前列表")])],1)],1),r("el-form",{ref:"filterForm",staticStyle:{background:"#fff",padding:"24px"},attrs:{model:e.filterForm,inline:!0}},[r("el-form-item",{attrs:{prop:"workcode",label:"工号："}},[r("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入工号"},model:{value:e.filterForm.workcode,callback:function(t){e.$set(e.filterForm,"workcode",t)},expression:"filterForm.workcode"}})],1),r("el-form-item",{attrs:{prop:"name",label:"姓名："}},[r("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入姓名"},model:{value:e.filterForm.name,callback:function(t){e.$set(e.filterForm,"name",t)},expression:"filterForm.name"}})],1),r("el-form-item",{attrs:{prop:"department",label:"部门："}},[r("el-cascader",{staticStyle:{"margin-left":"10px",width:"170px"},attrs:{placeholder:"请选择部门",props:e.filterProps,options:e.dpArr,"show-all-levels":!1},model:{value:e.filterForm.dp,callback:function(t){e.$set(e.filterForm,"dp",t)},expression:"filterForm.dp"}})],1),r("el-form-item",{attrs:{prop:"department",label:"晋升结果："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"全部"},model:{value:e.filterForm.status,callback:function(t){e.$set(e.filterForm,"status",t)},expression:"filterForm.status"}},e._l(e.approval_status_arr,(function(e,t){return r("el-option",{key:e,attrs:{label:e,value:t}})})),1)],1),r("el-form-item",[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("filterForm")}}},[e._v("查询")]),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){return e.resetForm("filterForm")}}},[e._v("重置")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"45"}}),r("el-table-column",{attrs:{prop:"workcode",label:"工号"}}),r("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"text",on:{click:function(r){return e.promotionName(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{prop:"department_name",label:"部门",width:"130"}}),r("el-table-column",{attrs:{prop:"level",label:"晋升前职级"}}),r("el-table-column",{attrs:{prop:"target_level",label:"目标职级"}}),r("el-table-column",{attrs:{prop:"status_text",label:"晋升结果"}}),r("el-table-column",{attrs:{prop:"apply_time",label:"申报时间",width:"180"}}),r("el-table-column",{attrs:{prop:"promotion_type_text",label:"晋升类型"}}),r("el-table-column",{attrs:{prop:"promotion_name",label:"晋升名称"}}),r("el-table-column",{attrs:{prop:"applicant_name",label:"提报人"}})],1),r("br"),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.constants.PAGINATION_SIZE_ENUM,"page-size":e.pageSize,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)},l=[],n=(r("e6cf"),r("841c"),r("ade3")),s=r("38fb"),o=r("fea5"),i=r("c9f1");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={data(){return{showDialog:!1,actionType:"add",selectedUser:"",pageSize:20,currentPage:1,total:0,filterProps:{value:"id",label:"name",children:"children"},filterForm:{workcode:"",name:"",dp:[],status:""},tableData:[],dpArr:[],approval_status_arr:[],constants:{PAGINATION_SIZE_ENUM:s["t"]},tabelSelection:[]}},methods:{handleSelectionChange(e){this.tabelSelection=e},promotionName(e){var t=e.promotion_id,r=e.id;this.$router.push(Object(i["n"])("approvalOrg",t,r))},exportApprovalOrgList(){var e={token:this.getToken(),workcode:this.filterForm.workcode,name:this.filterForm.name,department_id:this.filterForm.dp[this.filterForm.dp.length-1]?this.filterForm.dp[this.filterForm.dp.length-1]:"",status:this.filterForm.status};0==this.tableData.length?this.$message.warning("导出当前的数据为空"):this.downloadFile(i["b"],e,"get")},handleCurrentChange(e){this.search(p({},this.getBaseParams(),{page:e}))},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.search(p({},this.getBaseParams(),{per_page:e,page:1}))},getStatus(){Object(o["E"])().then(e=>{this.approval_status_arr=e})},getDepartments(){var e={display_parent_node:!0};Object(o["H"])(e).then(e=>{this.dpArr=e})},submitForm(e){this.$refs[e].validate(e=>{if(!e)return!1;this.currentPage=1,this.$nextTick((function(){this.search(p({},this.getBaseParams(),{page:1}))}))})},resetForm(e){this.$refs[e].resetFields(),this.$nextTick((function(){this.filterForm={workcode:"",name:"",dp:[],status:""},this.refresh()}))},search(e){Object(o["s"])(e).then(e=>{var{data:t,total:r}=e;this.tableData=t,this.total=r})},refresh(){this.search(this.getBaseParams())},getBaseParams(){return{page:this.currentPage,per_page:this.pageSize,workcode:this.filterForm.workcode,department_id:this.filterForm.dp[this.filterForm.dp.length-1]?this.filterForm.dp[this.filterForm.dp.length-1]:"",status:this.filterForm.status,name:this.filterForm.name}},modifyUser(e){this.selectedUser=e,this.actionType="modify",this.showDialog=!0}},components:{"content-frame":()=>r.e("chunk-76173720").then(r.bind(null,"fc5c"))},created(){this.getStatus(),this.getDepartments(),this.search(p({},this.getBaseParams(),{page:1}))}},m=u,d=(r("48e4"),r("2877")),h=Object(d["a"])(m,a,l,!1,null,"22385ef5",null);t["default"]=h.exports}}]);