(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b5d7bf7"],{7669:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"access-org-page"},[r("action-frame",[r("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"space-between"}},[r("div",{staticClass:"user_head"},[r("el-form",{ref:"filterForm",attrs:{model:e.filterForm,inline:!0}},[r("el-form-item",{attrs:{prop:"department",label:"事业部","label-width":"60px"}},[r("el-select",{attrs:{placeholder:"请选择事业部"},model:{value:e.filterForm.department,callback:function(t){e.$set(e.filterForm,"department",t)},expression:"filterForm.department"}},e._l(e.departmentArr,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.department_id}})})),1)],1),r("el-form-item",{attrs:{prop:"name"}},[r("el-input",{attrs:{placeholder:"关键词搜索"},model:{value:e.filterForm.name,callback:function(t){e.$set(e.filterForm,"name",t)},expression:"filterForm.name"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(t){return e.refreshForm()}}},[e._v("查询")]),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){return e.resetForm("filterForm")}}},[e._v("重置")])],1)],1)],1),r("div")])],1),r("div",{staticClass:"section-content"},[r("content-frame",[r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData}},[e._l(e.tableColumns,(function(e){return r("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label}})})),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.modifyUser(t.row)}}},[e._v("修改")])]}}])})],2),r("br"),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.constants.PAGINATION_SIZE_ENUM,"page-size":e.pageSize,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1),r("div",[r("el-dialog",{attrs:{visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[r("el-form",{ref:"formCareer",staticStyle:{padding:"30px 80px"},attrs:{model:e.formCareer,rules:e.rules}},[r("p",[r("span",{staticStyle:{paddingLeft:"61px"}},[e._v("事业部：")]),e._v(e._s(e.formCareer.business_unit_name)+" ")]),r("el-form-item",{attrs:{label:"事业部总经理:","label-width":e.formLabelWidth,prop:"manager_name"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入工号"},on:{select:e.selectManager},model:{value:e.formCareer.manager_workcode,callback:function(t){e.$set(e.formCareer,"manager_workcode",t)},expression:"formCareer.manager_workcode"}})],1),r("el-form-item",{attrs:{label:"事业部HRD:","label-width":e.formLabelWidth,prop:"hrd_name"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入工号"},on:{select:e.selectHrd},model:{value:e.formCareer.hrd_workcode,callback:function(t){e.$set(e.formCareer,"hrd_workcode",t)},expression:"formCareer.hrd_workcode"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)],1)],1)],1)},n=[];r("a4d3"),r("99af"),r("4de4"),r("4160"),r("d81d"),r("b0c0"),r("dca8"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("c975");function o(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function i(e,t){if(null==e)return{};var r,a,n=o(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=r("ade3"),c=r("38fb"),l=r("fea5");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={data:function(){return{pageSize:20,currentPage:1,total:0,tableData:[],rules:{manager_name:[{required:!0,message:"请输入事业部总经理",trigger:"blur"}],hrd_name:[{required:!0,message:"请输入事业部HRD",trigger:"blur"}]},formLabelWidth:"120px",showDialog:!1,filterForm:{name:"",department:[]},departmentArr:[],constants:{PAGINATION_SIZE_ENUM:c["t"]},id:"",formCareer:{manager_workcode:"",hrd_workcode:"",business_unit_name:"",manager_name:"",hrd_name:""},tableColumns:Object.freeze([{prop:"business_unit_name",label:"事业部"},{prop:"manager_name_workcode",label:"事业部总经理"},{prop:"hrd_name_workcode",label:"事业部HRD"}]),tableListAPI:l["j"]}},methods:{handleCurrentChange:function(e){this.getTableList(u({},this.getBaseParams(),{page:e}))},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getTableList(u({},this.getBaseParams(),{per_page:e,page:1}))},getTableList:function(e){var t=this;Object(l["j"])(e).then((function(e){var r=e.data,a=e.total;t.tableData=r.map((function(e){return u({},e,{managerName:e.manager_name,managerWorkCode:e.manager_workcode,hrdName:e.hrd_name,hrdWorkCode:e.hrd_workcode,business_unit_name:e.business_unit_name,manager_name_workcode:e.manager_workcode&&e.manager_name?"".concat(e.manager_name,"-").concat(e.manager_workcode):"",hrd_name_workcode:e.hrd_name&&e.hrd_workcode?"".concat(e.hrd_name,"-").concat(e.hrd_workcode):""})})),t.total=a}))},searchUserBasicInfo:function(e){return Object(l["cb"])({keywords:e})},querySearch:function(e,t){e?this.searchUserBasicInfo(e).then((function(e){t(e.map((function(e){return e.value=e.workcode+"—"+e.name,e}))||[])})):t([])},selectHrd:function(e){this.formCareer.hrd_name=e.name,this.formCareer.hrd_workcode=e.workcode},selectManager:function(e){this.formCareer.manager_name=e.name,this.formCareer.manager_workcode=e.workcode},close:function(){this.showDialog=!1,this.$refs.formCareer.resetFields()},submitForm:function(){var e=this;this.$refs.formCareer.validate((function(t){t&&Object(l["K"])(e.id,e.getFormParams()).then((function(t){e.$message({message:"添加成功!",type:"success"}),e.showDialog=!1,e.refresh()}))}))},refreshForm:function(){this.currentPage=1,this.$nextTick((function(){this.getTableList(u({},this.getBaseParams(),{page:1}))}))},resetForm:function(e){this.$refs[e].resetFields(),this.$nextTick((function(){this.refresh()}))},refresh:function(){this.getTableList(this.getBaseParams())},getBaseParams:function(){return{page:this.currentPage,department_id:this.filterForm.department,name:this.filterForm.name,per_page:this.pageSize}},getFormParams:function(){return{manager_workcode:this.formCareer.manager_workcode,hrd_workcode:this.formCareer.hrd_workcode,business_unit_name:this.formCareer.business_unit_name,manager_name:this.formCareer.manager_name,hrd_name:this.formCareer.hrd_name}},getDepartments:function(){var e=this;Object(l["k"])().then((function(t){e.departmentArr=t}))},modifyUser:function(e){var t=e.id,r=i(e,["id"]);this.id=t,this.formCareer=r,this.$nextTick((function(){this.form=Object.assign({},e)})),this.showDialog=!0}},components:{"action-frame":function(){return r.e("chunk-076129e3").then(r.bind(null,"cb5f"))},"content-frame":function(){return r.e("chunk-76173720").then(r.bind(null,"fc5c"))}},created:function(){this.getDepartments(),this.refresh()}},d=f,h=(r("8544"),r("2877")),p=Object(h["a"])(d,a,n,!1,null,"e568ab54",null);t["default"]=p.exports},"7c40":function(e,t,r){},8544:function(e,t,r){"use strict";var a=r("7c40"),n=r.n(a);n.a},b0c0:function(e,t,r){var a=r("83ab"),n=r("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,c="name";!a||c in o||n(o,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})},dca8:function(e,t,r){var a=r("23e7"),n=r("bb2f"),o=r("d039"),i=r("861d"),s=r("f183").onFreeze,c=Object.freeze,l=o((function(){c(1)}));a({target:"Object",stat:!0,forced:l,sham:!n},{freeze:function(e){return c&&i(e)?c(s(e)):e}})}}]);