(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ebc1436"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},5789:function(e,t,r){"use strict";var a=r("71b7"),n=r.n(a);n.a},"71b7":function(e,t,r){},"841c":function(e,t,r){"use strict";var a=r("d784"),n=r("825a"),o=r("1d80"),i=r("129f"),s=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var o=n(e),c=String(this),l=o.lastIndex;i(l,0)||(o.lastIndex=0);var u=s(o,c);return i(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]}))},b0c0:function(e,t,r){var a=r("83ab"),n=r("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,c="name";!a||c in o||n(o,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})},bfcc:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"access-hrbp-page"},[r("action-frame",[r("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"space-between"}},[r("div",{staticClass:"user_head"},[r("el-form",{ref:"filterForm",attrs:{model:e.filterForm,inline:!0,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"department","label-width":"60px"}},[r("el-select",{attrs:{placeholder:"请选择数据来源"},model:{value:e.filterForm.dp,callback:function(t){e.$set(e.filterForm,"dp",t)},expression:"filterForm.dp"}},e._l(e.dpArr,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入部门或编码"},model:{value:e.filterForm.keyword,callback:function(t){e.$set(e.filterForm,"keyword",t)},expression:"filterForm.keyword"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(t){return e.refreshForm()}}},[e._v("查询")]),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],1)],1),r("div",[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{plain:""},on:{click:e.addRole}},[e._v("新增HRBP")])],1)])],1),r("div",{staticClass:"section-content"},[r("content-frame",[r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData}},[r("el-table-column",{attrs:{prop:"department_id",label:"部门编号"}}),r("el-table-column",{attrs:{prop:"department_name",label:"部门名称"}}),r("el-table-column",{attrs:{prop:"HRBP",label:"HRBP"}}),r("el-table-column",{attrs:{prop:"source_text",label:"数据来源"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:"系统同步"==t.row.source_text,type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.modifyUser(t.row)}}},[e._v("修改")]),r("el-button",{attrs:{disabled:"系统同步"==t.row.source_text,type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.deleteRow(t.row.id)}}},[e._v("删除")])]}}])})],1),r("br"),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.constants.PAGINATION_SIZE_ENUM,"page-size":e.pageSize,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1),r("div",[r("el-dialog",{attrs:{visible:e.showDialog,"before-close":e.closeForm},on:{"update:visible":function(t){e.showDialog=t}}},[r("el-form",{ref:"formCareer",staticStyle:{padding:"30px 80px"},attrs:{model:e.formCareer,rules:e.formRules}},["add"==e.actionType?r("el-form-item",{attrs:{label:"部门编号","label-width":e.formLabelWidth,prop:"department_id"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入部门编号"},on:{select:e.selectManager},model:{value:e.formCareer.department_id,callback:function(t){e.$set(e.formCareer,"department_id",t)},expression:"formCareer.department_id"}})],1):r("el-form-item",[r("el-form-item",{attrs:{label:"部门编号：","label-width":e.formLabelWidth}},[e._v(e._s(e.formCareer.department_id))]),r("el-form-item",{attrs:{label:"部门名称：","label-width":e.formLabelWidth}},[e._v(e._s(e.formCareer.department_name))])],1),r("el-form-item",{attrs:{label:"HRBP：","label-width":e.formLabelWidth,prop:"workcode"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入工号"},on:{select:e.selectHrd},model:{value:e.formCareer.workcode,callback:function(t){e.$set(e.formCareer,"workcode",t)},expression:"formCareer.workcode"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("div",[r("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)])],1)],1)],1)},n=[],o=(r("a4d3"),r("4de4"),r("4160"),r("d81d"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("ac1f"),r("841c"),r("159b"),r("ade3")),i=r("38fb"),s=r("fea5");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={data:function(){return{formRules:{department_id:[{required:!0,message:"请输入部门编号",trigger:"blur"}],workcode:[{required:!0,message:"请输入工号",trigger:"blur"}]},formLabelWidth:"120px",actionType:"add",showDialog:!1,pageSize:20,currentPage:1,total:0,filterForm:{keyword:"",dp:""},dpArr:[{value:1,label:"系统同步"},{value:2,label:"手动添加"}],tableData:[],constants:{PAGINATION_SIZE_ENUM:i["t"]},id:"",formCareer:{workcode:"",department_id:"",department_name:""}}},methods:{searchUserBasicInfo:function(e){return Object(s["cb"])({keywords:e})},searchDepartmentInfo:function(e){return Object(s["ab"])({keywords:e})},querySearch:function(e,t){e?this.searchUserBasicInfo(e).then((function(e){t(e.map((function(e){return e.value=e.workcode+"----"+e.name,e}))||[])})):t([])},querySearchAsync:function(e,t){e?this.searchDepartmentInfo(e).then((function(e){t(e.map((function(e){return e.value=e.department_id+"----"+e.name,e}))||[])})):t([])},selectHrd:function(e){this.formCareer.workcode=e.workcode},selectManager:function(e){this.formCareer.department_id=e.department_id},handleCurrentChange:function(e){this.search(l({},this.getBaseParams(),{page:e}))},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.search(l({},this.getBaseParams(),{per_page:e,page:1}))},close:function(){"add"==this.actionType?this.$refs.formCareer.resetFields():this.$refs.formCareer.clearValidate(),this.showDialog=!1,this.actionType=""},closeForm:function(){this.close()},addRole:function(){this.actionType="add",this.showDialog=!0,this.formCareer={workcode:"",department_id:""}},refreshForm:function(){this.currentPage=1,this.$nextTick((function(){this.search(l({},this.getBaseParams(),{page:1}))}))},submitForm:function(){var e=this;this.$refs.formCareer.validate((function(t){t&&("add"==e.actionType?Object(s["O"])(e.getFormParams()).then((function(t){e.$message({message:"添加成功!",type:"success"}),e.showDialog=!1,e.refresh()})):Object(s["db"])(e.id,e.getParams()).then((function(t){e.$message({message:"添加成功!",type:"success"}),e.showDialog=!1,e.refresh()})))}))},deleteRow:function(e){var t=this;this.showConfirm("确定要删除吗?").then((function(){Object(s["h"])(e).then((function(e){t.$message({message:"删除成功!",type:"success"}),t.refresh()}))})).catch((function(){}))},resetForm:function(){this.filterForm.dp="",this.filterForm.keyword="",this.$nextTick((function(){this.refresh()}))},search:function(e){var t=this;Object(s["l"])(e).then((function(e){t.tableData=e.data;for(var r=0;r<t.tableData.length;r++)t.tableData[r].HRBP=t.tableData[r].name+"-"+t.tableData[r].workcode;t.total=e.total}))},refresh:function(){this.search(this.getBaseParams())},getBaseParams:function(){return{page:this.currentPage,per_page:this.pageSize,source:this.filterForm.dp,keyword:this.filterForm.keyword}},getFormParams:function(){return{workcode:this.formCareer.workcode,department_id:this.formCareer.department_id}},getParams:function(){return{workcode:this.formCareer.workcode}},modifyUser:function(e){this.actionType="modify",this.id=e.id,this.$nextTick((function(){this.formCareer=Object.assign({},e)})),this.showDialog=!0}},components:{"action-frame":function(){return r.e("chunk-076129e3").then(r.bind(null,"cb5f"))},"content-frame":function(){return r.e("chunk-76173720").then(r.bind(null,"fc5c"))}},created:function(){this.search(l({},this.getBaseParams(),{page:1}))}},f=u,d=(r("5789"),r("2877")),m=Object(d["a"])(f,a,n,!1,null,"3b8061af",null);t["default"]=m.exports}}]);