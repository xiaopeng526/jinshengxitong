(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad28d62e"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"67c0":function(t,e,a){"use strict";var r=a("c7d1"),l=a.n(r);l.a},"841c":function(t,e,a){"use strict";var r=a("d784"),l=a("825a"),o=a("1d80"),s=a("129f"),n=a("14c3");r("search",1,(function(t,e,a){return[function(e){var a=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,a):new RegExp(e)[t](String(a))},function(t){var r=a(e,t,this);if(r.done)return r.value;var o=l(t),i=String(this),p=o.lastIndex;s(p,0)||(o.lastIndex=0);var c=n(o,i);return s(o.lastIndex,p)||(o.lastIndex=p),null===c?-1:c.index}]}))},c7d1:function(t,e,a){},ff3f:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-approval-page"},[a("content-frame",[a("el-row",{staticStyle:{background:"#fff",padding:"14px 24px"}},[a("el-col",{attrs:{span:24,align:"end",justify:"end"}},[a("el-button",{staticStyle:{"border-radius":"20px"},attrs:{type:"primary"},on:{click:t.exportMyApprovalList}},[t._v("导出当前列表 ")])],1)],1),a("el-form",{ref:"filterForm",staticStyle:{background:"#fff",padding:"24px"},attrs:{model:t.filterForm,inline:!0}},[a("el-form-item",{attrs:{prop:"workcode",label:"工号："}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入工号"},model:{value:t.filterForm.workcode,callback:function(e){t.$set(t.filterForm,"workcode",e)},expression:"filterForm.workcode"}})],1),a("el-form-item",{attrs:{prop:"name",label:"姓名："}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入姓名"},model:{value:t.filterForm.name,callback:function(e){t.$set(t.filterForm,"name",e)},expression:"filterForm.name"}})],1),a("el-form-item",{attrs:{prop:"dp",label:"部门："}},[a("el-cascader",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择部门",props:t.filterProps,options:t.dpArr,"show-all-levels":!1},model:{value:t.filterForm.dp,callback:function(e){t.$set(t.filterForm,"dp",e)},expression:"filterForm.dp"}})],1),a("el-form-item",{attrs:{prop:"approval_status",label:"操作状态："}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"全部"},model:{value:t.filterForm.approval_status,callback:function(e){t.$set(t.filterForm,"approval_status",e)},expression:"filterForm.approval_status"}},t._l(t.approval_status_arr,(function(t,e,r){return a("el-option",{key:r,attrs:{label:t,value:e}})})),1)],1),a("el-form-item",[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(e){return t.submitForm("filterForm")}}},[t._v("查询 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(e){return t.resetForm("filterForm")}}},[t._v("重置")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{prop:"workcode",label:"工号"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text",on:{click:function(a){return t.promotionName(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"department_name",label:"部门"}}),a("el-table-column",{attrs:{prop:"level",label:"晋升前职级"}}),a("el-table-column",{attrs:{prop:"target_level",label:"目标职级"}}),a("el-table-column",{attrs:{prop:"review_status_text",label:"操作状态"}}),a("el-table-column",{attrs:{prop:"status_text",label:"流程状态"}}),a("el-table-column",{attrs:{prop:"apply_time",label:"申报时间"}}),a("el-table-column",{attrs:{prop:"promotion_type_text",label:"晋升类型"}}),a("el-table-column",{attrs:{prop:"promotion_name",label:"晋升名称"}}),a("el-table-column",{attrs:{prop:"applicant_name",label:"提报人"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status>=9e3?a("el-button",{attrs:{disabled:"",type:"text",size:"small"}},[t._v("审批 ")]):a("el-button",{attrs:{type:"text",size:"small",disabled:!e.row.can_review},nativeOn:{click:function(a){return a.preventDefault(),t.showApprovalDialog(e.row)}}},[t._v("审批 ")])]}}])})],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":t.constants.PAGINATION_SIZE_ENUM,"page-size":t.pageSize,layout:"sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1),t.ApprovalDialog?a("approval-dialog",{attrs:{ApprovalDialog:t.ApprovalDialog,Id:t.Id,approvalType:t.approvalType},on:{close:t.closeApprovalDialog,refresh:t.refresh}}):t._e()],1)},l=[],o=(a("e6cf"),a("841c"),a("ade3")),s=a("38fb"),n=a("fea5"),i=a("c9f1");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={data(){return{pageSize:20,currentPage:1,total:0,filterProps:{value:"id",label:"name",children:"children"},filterForm:{workcode:"",name:"",dp:[],approval_status:""},tableData:[],dpArr:[],approval_status_arr:[],constants:{PAGINATION_SIZE_ENUM:s["t"]},tabelSelection:[],ApprovalDialog:!1,Id:"",approvalType:"hr"}},methods:{closeApprovalDialog(){this.ApprovalDialog=!1},handleSelectionChange(t){this.tabelSelection=t},promotionName(t){var e=t.promotion_id,a=t.id;this.$router.push(Object(i["n"])("myApproval",e,a))},exportMyApprovalList(){var t={token:this.getToken(),workcode:this.filterForm.workcode,name:this.filterForm.name,department_id:this.filterForm.dp[this.filterForm.dp.length-1]?this.filterForm.dp[this.filterForm.dp.length-1]:"",approval_status:this.filterForm.approval_status};0==this.tableData.length?this.$message.warning("导出当前的数据为空"):this.downloadFile(i["d"],t,"get")},handleCurrentChange(t){this.search(c({},this.getBaseParams(),{page:t}))},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.search(c({},this.getBaseParams(),{per_page:t,page:1}))},getStatus(){Object(n["J"])().then(t=>{this.approval_status_arr=t})},getDepartments(){var t={display_parent_node:!0};Object(n["H"])(t).then(t=>{this.dpArr=t})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return!1;this.currentPage=1,this.$nextTick((function(){this.search(c({},this.getBaseParams(),{page:1}))}))})},resetForm(t){this.$refs[t].resetFields(),this.refresh()},search(t){Object(n["r"])(t).then(t=>{var{data:e,total:a}=t;this.tableData=e,this.total=a})},refresh(){this.search(this.getBaseParams())},getBaseParams(){return{page:this.currentPage,workcode:this.filterForm.workcode,department_id:this.filterForm.dp[this.filterForm.dp.length-1]?this.filterForm.dp[this.filterForm.dp.length-1]:"",approval_status:this.filterForm.approval_status,name:this.filterForm.name,per_page:this.pageSize}},showApprovalDialog(t){200==t.status?this.approvalType="super":300==t.status?this.approvalType="hr":400==t.status?this.approvalType="org":500==t.status&&(this.approvalType="bu"),this.Id=t.id,this.ApprovalDialog=!0}},components:{"content-frame":()=>a.e("chunk-76173720").then(a.bind(null,"fc5c")),"approval-dialog":()=>a.e("chunk-2d21a986").then(a.bind(null,"bbd4"))},created(){this.getStatus(),this.getDepartments(),this.search(c({},this.getBaseParams(),{page:1}))}},d=u,h=(a("67c0"),a("2877")),m=Object(h["a"])(d,r,l,!1,null,"4d4c75aa",null);e["default"]=m.exports}}]);