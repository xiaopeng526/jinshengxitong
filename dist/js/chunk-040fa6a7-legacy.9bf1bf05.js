(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-040fa6a7"],{"126b":function(e,t,r){"use strict";var a=r("fb7b"),l=r.n(a);l.a},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"42fd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"promotion-admin-page"},[r("content-frame",[r("el-row",{staticStyle:{background:"#fff",padding:"14px 24px"}},[r("el-col",{attrs:{span:24,align:"end",justify:"end"}},[r("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"text",size:"small"},on:{click:e.pushingForward}},[e._v("催办 ")]),r("el-button",{staticStyle:{"border-radius":"20px"},attrs:{type:"primary"},on:{click:e.exportPromotionManageList}},[e._v("导出当前列表 ")])],1)],1),r("el-form",{ref:"filterForm",staticStyle:{background:"#fff",padding:"24px"},attrs:{model:e.filterForm,inline:!0}},[r("el-form-item",{attrs:{prop:"keyword"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入工号或姓名"},model:{value:e.filterForm.keyword,callback:function(t){e.$set(e.filterForm,"keyword",t)},expression:"filterForm.keyword"}})],1),r("el-form-item",{attrs:{prop:"is_apply",label:"是否申报："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"全部"},model:{value:e.filterForm.is_apply,callback:function(t){e.$set(e.filterForm,"is_apply",t)},expression:"filterForm.is_apply"}},e._l(e.is_applys,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"target_levels",label:"目标职级："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{multiple:"",placeholder:"全部"},model:{value:e.filterForm.target_levels,callback:function(t){e.$set(e.filterForm,"target_levels",t)},expression:"filterForm.target_levels"}},e._l(e.levels,(function(e,t,a){return r("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{prop:"status",label:"流程状态："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{multiple:"",placeholder:"全部"},model:{value:e.filterForm.status,callback:function(t){e.$set(e.filterForm,"status",t)},expression:"filterForm.status"}},e._l(e.approval_status_arr,(function(e,t,a){return r("el-option",{key:a,attrs:{label:e,value:t}})})),1)],1),r("el-form-item",[r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("filterForm")}}},[e._v("查询 ")]),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){return e.resetForm("filterForm")}}},[e._v("重置")])],1)],1),r("el-table",{ref:"tableRef",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"45"}}),r("el-table-column",{attrs:{prop:"workcode",label:"工号"}}),r("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"text",on:{click:function(r){return e.promotionName(t.row)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),r("el-table-column",{attrs:{prop:"department_name","min-width":"200",label:"部门"}}),r("el-table-column",{attrs:{prop:"level",label:"当前职级"}}),r("el-table-column",{attrs:{prop:"target_level",label:"目标职级"}}),r("el-table-column",{attrs:{prop:"promotion_type_text",label:"晋升类型"}}),r("el-table-column",{attrs:{prop:"applicant_name",label:"申报人"}}),r("el-table-column",{attrs:{prop:"apply_time","min-width":"160",label:"申报时间"}}),r("el-table-column",{attrs:{prop:"status_text",label:"流程状态"}})],1),r("br"),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.constants.PAGINATION_SIZE_ENUM,"page-size":e.pageSize,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e.dialogVisible?r("manage-dialog",{attrs:{visible:e.dialogVisible,selectedIds:e.selectedIds,promotion_id:e.promotion_id,approvedData:e.approvedData},on:{close:e.closeApprovalDialog}}):e._e()],1)},l=[],n=(r("a4d3"),r("4de4"),r("4160"),r("c975"),r("d81d"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("ac1f"),r("841c"),r("159b"),r("ade3")),i=r("38fb"),o=r("fea5"),s=r("c9f1");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={data:function(){return{pageSize:20,currentPage:1,total:0,filterForm:{keyword:"",is_apply:"",target_levels:[],status:[]},levels:[],is_applys:[{value:"1",label:"是"},{value:"0",label:"否"}],tableData:[],promotion_id:this.$route.query.id,approval_status_arr:[],constants:{PAGINATION_SIZE_ENUM:i["t"]},tabelSelection:[],dialogVisible:!1}},methods:{getRowKeys:function(e){return e.workcode},closeApprovalDialog:function(){this.dialogVisible=!1},handleSelectionChange:function(e){this.tabelSelection=e},promotionName:function(e){this.$router.push(Object(s["n"])("manager",this.promotion_id,e.id))},exportPromotionManageList:function(){var e={token:this.getToken(),workcodeOrName:this.filterForm.keyword,is_apply:this.filterForm.is_apply,target_levels:this.filterForm.target_levels,status:this.filterForm.status,promotion_id:this.promotion_id};if(0==this.tableData.length)return this.$message.warning("导出当前的数据为空");this.downloadFile(s["c"],e,"get"),this.clearSelection()},clearSelection:function(){this.$refs["tableRef"].clearSelection()},pushingForward:function(){var e=0==this.tabelSelection.length;e?this.$message.error("请选择需要催办的流程"):this.dialogVisible=!0},handleCurrentChange:function(e){this.search(u({},this.getBaseParams(),{page:e}))},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.search(u({},this.getBaseParams(),{per_page:e,page:1}))},getStatus:function(){var e=this;Object(o["p"])().then((function(t){e.approval_status_arr=t}))},getTeamLevel:function(){var e=this;Object(o["x"])().then((function(t){e.levels=t}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.currentPage=1,t.$nextTick((function(){this.search(u({},this.getBaseParams(),{page:1}))})))}))},resetForm:function(e){this.$refs[e].resetFields(),this.refresh()},search:function(e){var t=this;Object(o["Y"])(this.promotion_id,e).then((function(e){var r=e.data,a=e.total;t.tableData=r,t.total=a,t.clearSelection()}))},refresh:function(){this.search(this.getBaseParams())},getBaseParams:function(){return{page:this.currentPage,keyword:this.filterForm.keyword,is_apply:this.filterForm.is_apply,target_levels:this.filterForm.target_levels,status:this.filterForm.status,per_page:this.pageSize}}},computed:{selectedIds:function(){return this.tabelSelection.map((function(e){return e.id}))},approvedData:function(){return this.tabelSelection.filter((function(e){return-1==i["f"].indexOf(e.status_text)}))}},components:{"content-frame":function(){return r.e("chunk-76173720").then(r.bind(null,"fc5c"))},"manage-dialog":function(){return r.e("chunk-548eee1a").then(r.bind(null,"8e76"))}},created:function(){this.getStatus(),this.getTeamLevel(),this.refresh()}},f=p,d=(r("126b"),r("2877")),m=Object(d["a"])(f,a,l,!1,null,"2ee8e75e",null);t["default"]=m.exports},"841c":function(e,t,r){"use strict";var a=r("d784"),l=r("825a"),n=r("1d80"),i=r("129f"),o=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=n(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var n=l(e),s=String(this),c=n.lastIndex;i(c,0)||(n.lastIndex=0);var u=o(n,s);return i(n.lastIndex,c)||(n.lastIndex=c),null===u?-1:u.index}]}))},fb7b:function(e,t,r){}}]);